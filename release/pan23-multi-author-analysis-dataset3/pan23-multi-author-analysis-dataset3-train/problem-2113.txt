In many cases, simply asking those questions without any legitimate purpose in asking those questions can be presumed to mean you intend to use the answers to those questions to discriminate against applicants.
Bear in mind that goes beyond just asking questions on applications, if you refuse to hire people of a specific race because of your garbage views, or treat them differently, or pay them differently, your discriminatory work practices will get you sued.
In all circumstances, it is illegal and improper to recruit or make hiring decisions on the basis of race or gender either expressed or implied, or by means or method that disproportionately impacts potential candidates by race or gender unless expressly permitted.
According to the EEOC race can be collected for various reasons including BLS and other workforce statistical recording. But it must be easily and completely segregated from the hiring decision by means of a tear off or other similar method (like a web app that splits the race information from the rest of the application) before the application is sent to a hiring manager for consideration. The race information should be forwarded to a person not involved in the hiring.
This applies to employers with 15 or more employees (20 for age), and other federal or state laws may supersede and reduce those numbers.
Kentucky, for example, extends this or substantially similar protection to cover all employers with 8 or more employees under their state anti discrimination law.