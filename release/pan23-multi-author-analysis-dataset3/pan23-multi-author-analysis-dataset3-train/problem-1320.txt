Yes, heavily dependent on state law. Medical use may be protected by anti-discrimination law, and a few states protect employees for using even recreational substances if they are legal at the state level (usually originally intended to protect tobacco smokers from discrimination, but it also applies to alcohol and cannabis, if the latter is legal in the state).
Some have certain protections against discrimination in employment scenarios for lawful marijuana use.
And even in the ones that do, if the private sector employer works on federal contracts (and some other scenarios), they can discriminate against legal marijuana use.
If you're using cannabis off company time for a medical reason, arguably termination for cannabis use is a violaiton of your rights under the ADA and your state's anti-discrimination laws (your mileage may vary depending on location).
need location, but assuming you're not in Montana, if you are an at-will employee your employer can fire you for any reason, or no reason at all, so long as the employer doesn't violate the law in doing so. Typically, we're talking about terminating someone because they were a whistleblower, or if they are a member of a protected class - disability is included there.