China has said they would come to North Koreaâ€™s defense in the event that it is attacked by foreign entities.
I have a hard time imagining a north korean missile -accidentally- hitting Beijing. But if it did, China would probably wipe them out down to the last man, woman and child. No more North Korea, no more North Koreans.
No one wants a humanitarian crisis in North Korea. Neither South Korea, Japan, China or Russia want it, because they'd have to deal with million of refugees decades behind the rest of the world.
I doubt in either, both would cause a massive refugee crisis, which is exactly what China wants to avoid by propping them up. It would result in rolling back of support and extracting concessions to prevent a repeat, most likely.
Probably piss off other US allies elsewhere as well, since it woild be the US acting like a reckless rogue state playing with ICBMs like that.
They just have to nuke a neighbour aligned with the US, like Korea or Japan that iirc are under the US nuclear umbrella, and you suddenly start activating the string of nuclear doctrines that create MAD.