The decline of Buddhism in India can be attributed to two primary reasons, the Muslim invasions in the 12th century, and the "stagnation" of Buddhism at this time. "Stagnation" is perhaps too negative a term. However, what I mean by this is that Buddhism in the Indian Subcontinent by the 12th century had become less energetic, proselytizing, and innovative.
Buddhism historically flourishes when it receives the patronage of the ruling class. The relationship in the Sangha between the ordained and the lay community is that of mutual benefit, the monks offer spiritual services, guidance, and teaching, while the lay community ensures its survival with financial and material support. Ordained monks are prohibited from growing food and practicing trade, thus, they rely heavily on sponsors from their local community, and on a wider scale, lords and kings.
Just as important is understanding how Buddhism originated in its native environment. Buddhism originated and evolved as a reaction to early Vedic traditions/Brahmanism. Buddhism rejected the caste system, as well as the notion of nonself, against the Vedic understanding that the self is in unison to Brahman, part of a universal soul. Early Buddhism also deemphasized rituals and worship of gods, the former which was only accessible to higher castes.
With the Muslim invasions, not only were Buddhist institutions sacked and monks massacred, taxation and seizing of lands further inhibited the communities. As elite patronage was no longer possible, the lay community slowly died out. Jainism and Brahmanism survived due to Jainism's more demanding and active relationship between the ordained and laity, and brahmins are more involved in social, political, and legal matters. Buddhism was too inward looking, considering the renunciatory customs of the ordained. What I mean by stagnation is not laziness, idleness, or corruption. There was just no creative outburst and development like in the first and sixth centuries. Many elements of Buddhism became incorporated and mixed into Brahmanism/Hinduism. The Buddha and Buddhist deities were folded into the Hindu Pantheon. Iconography, mythology, and vocabulary were already similar and shared to begin with, they gradually were assimilated in full. Finally, many monks relocated to Nepal, Tibet, or Southeast Asia.
In Sri Lanka, Buddhism was not flourishing continuously. Sri Lanka saw just as many divisive and tumultuous periods as India did, with invasions and warring kings and states. Figures such as Kalinga Magha controlled the island's north and devastated the Buddhist community. Just as in India, foreign invasions, pirates, and civil strife prevented financial support for the Sangha. Many times the monks were so few that envoys were sent to Burma or Thailand to recieve more numbers and texts. Portuguese invasions in the sixteenth century also persecuted Buddhists in favor of Catholicism, and southern kings such as Rajasinha I further razed Buddhism temples. It was British rule however that saw a true revival of Buddhism. Initially led by Henry Steel Olcott through his Theosophical movement, other figures such as Anagarika Dharmapala heavily embraced the historical Buddhist identity and promoted its revitalization.
[Buddhism originated in India but today, most of India is either Hindu or Muslim. Conversely, Buddhism is very common in East Asian countries such as Japan. What were some of the key factors that lead to the decline of Buddhism in India and its rise in East Asia?](.
There are many similar questions with fantastic answers, which I shall link below. I can answer part of your question briefly here.
Smith, Huston, and Philip Novak. 2003. Buddhism A Concise Introduction. New York: HarperCollins World.
Perera, H. R. 1988. Buddhism in Sri Lanka: a short history. Kandy, Sri Lanka: Buddhist Publication Society.
u/troymcclurehere and u/JimeDorje on [Why did Buddhism slowly decline in India and Hinduism flourish?
"Institutional Buddhism" typically refers to "the institutions of Buddhism" that we see in Buddhist countries and societies. The community of Buddhism normally referenced is the "sangha" which is the community of monks. Very very strictly speaking, the only "real" Buddhists are the monks. We can expand outwards to "lay followers," known as upasaka and upasika (men and women respectively), and then outward to a general population that adheres to Buddhism while taking no formal initiation ceremony. This last group starts to edge into the territory of what we might term "folk Buddhism" or Buddhism practiced without monastic institutions. The core Sangha and the associated lay followers, however, would be more what we refer to as "institutional Buddhism" as in this environment there is a monastic establishment, usually a series of temples, and usually a formal relationship with the national government. Bhutan and Thailand are good modern examples of institutional Buddhism. The Sangha has a formal structure and a prescribed relationship with the monarchical government, and official legal status. South Korea and Japan can also be described as institutionally Buddhist (adjacent at the very least) even though they are democratic societies without a prescribed place for Buddhist monks in the government. China is a case where institutional Buddhism is present as well, as there are Buddhist temples and monasteries, and there is a formal relationship with the government, even though it is often antagonistic. In modern India, the case of institutional Buddhism is a bit more ambiguous given the pilgrimage places sponsored and built by foreign governments and Sanghas (Bodh Gaya, I'm pretty sure has a Buddhist temple of every Buddhist school and denomination, a Drukpa Kagyu one supported from Bhutan, a Gelukpa one which I'm sure is supported by the Tibetan exile community, probably more than a few Theravadin temples supported by Sri Lankan, Burmese, and Thai communities, etc. etc. Though the case in, say, Afghanistan is probably more clear in that institutional Buddhism has clearly been absent from Afghanistan in any meaningful manner for a long time. There is no official Sangha in a meaningful capacity in Afghanistan (at least, this would be news to me) and there is no legal protection or formal relationship of Afghan Buddhists to the government.
Sri Lanka- in terms of the Buddhist/Sinhala population- does not seem to have had the same degree of Hindu/Brahmanist indigenous influence that mainland India had. While the stories of the origins of the Sinhala are heavily mythologized, they all essentially equate to the idea of a northern Indian people (who may not have been Buddhist yet, but may have been part of the non-Vedic cultures that existed alongside Vedic India) colonizing an island that was mostly inhabited by animist indigenes. Events recorded in the mainland Buddhist Vinaya (monastic law) tradition suggests that while mainland Buddhism developed alongside well-established Brahmanist/Hindu traditions, in Sri Lanka Hinduism wasn't the dominant local ideology, except among immigrants from Southern India.
Sinhala kings were actively engaged in trying to maintain their independence from mainland India, and even in certain eras trying to assert control over regions of India and be a "player" in the contest for control of regions of India. Mahavihara Buddhism (Theravada) was largely under the control or influence of Sinhala kings, whereas other schools of Buddhism and Hindu thought were either well established enough to exert their own control, or were under the control of Hindu or Buddhist rivals in the mainland. The independence of Sinhala Buddhism was part of how Sri Lanka exerted an independent identity and maintained its uniqueness from southern India and other regional rivals. These kings were directly threatened by the Tamil invasions, and Sinhala Buddhism provided an ideological support to their struggles to repel the southern India invaders- it allowed them to say to the public "we are standing up for your beliefs, not just the dominance of one oligarchy over another".
To a certain extent, you have to recognize that the average person is not committed to ideological positions but is instead a consumer of religion and patron of various shrines and priests. If the Hindus claim to have a magical verse that protects you from lightning, then the Buddhists have to have one too. We see that Buddhism over time begins to adopt these aspects of popular religion that, whatever their origin, tend to blur the distinction between Buddhism as a unique spiritual path vs. just another of the multiple gods that you can patronize for protection, good fortune, etc.
Part of what went on was less "losing debates", than the dynamism and popular support following the areas where it seemed that new innovations were happening. Buddhist universities, for instance, also taught Hindu thought and Sanskrit in order to enable students to engage in debates with Hindu thinkers and compose prose and verse in ways that were regarded as "civilized" by the wider cosmopolis. In many situations, the points that separate Buddhist thought from Hindu such as denial of the eternal self or Atman and the non-primacy of deities were 1) beyond the reasoning of the average illiterate lay person, and 2) softened over time, either by mutual influence or the evolution of Buddhist practice. If you are making offerings and reciting hymns to the Buddha and the Bodhisattvas but there is nothing in your religion that says you can't also make offerings to other deities, then for the average lay person the distinction between being a Buddhist who is a client and donor to a monk vs. being a Hindu who is a client and donor to a priest or Hindu monk begins to be blurred.