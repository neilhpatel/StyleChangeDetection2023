Now that you have specified it, I am going to tell one such case of urban warfare, my city in 1589.
After the Spanish Armada, the English decided to counterattack, and they did so the very next year. When the English fleet came with the intent of destroying the 100 or so ships that still remained from the Armada, they could not get to Santander, where the Spanish fleet was under repair, so they tried to find another place to invade and where to set a foothold: Coruña, an important port in Galicia, but with relatively few people (around 4,000).
The immense English fleet or 180 ships and over 25,000 men came to the city thinking of a quick victory, but reality was very much different. The attacks started with the fleet making it to southeastern bay of Coruña, as the northwestern bay is impossible for large ships (too many rocks). The city was defended by the castles of San Diego (not existing nowadays) and San Antón (currently the Archaeological Museum), from which the defenders started opening fire, trying to prevent the fleet from disembarking. The guns from the ramparts were also firing against the English ships, but all of the gunnery fire could not repeal the attack, and the English made its way to the quarter known as Pescadería (the Fishermen's quarter, today city centre).
The city's militia fought street by street, profiting from the knowledge of the terrain, setting up ambushes as best as they could in order to protect the civilians, who managed to seek refuge in the city itself, that had strong walls (today known as the old town). The militia suffered heavy losses, but gained the civilians all the time they could to get intra muros. Then, the militia followed suit and regrouped inside the ramparts. They numbered no more than 1,200 and were led by Juan Varela. The actual soldiers were but another 1,000, commanded by the marquess of Cerralbo, and 150 veteran arquebusiers by Álvaro Troncoso de Ulloa.
Throughout the next days, and for a couple of weeks, the militias and the troops organised sorties and encamisadas in order to cause damages to the English while minimising the losses. They were relatively succesful, but working on borrowed time, hoping for the actual army to eventually appear and rid them of the English invaders. Time and time again they kept harming the English, but being so completely outnumbered, they could only wait and hope for the best.
Meanwhile, the English started building a tunnel for a mine with which they would demolish a part of the ramparts and start the assault, with that and sheer numbers, that city should fall within no time. The troops prepared for the assault. The mine was set on fire, but the tunnel had been slightly too long and the gunpowder too much, causing the ramparts to blow up outwards, burying 400 Englishmen in the process. Light loss, but still bad. The city's militias kept the attackers at bay for as long as they could, while the troops commanded by Cerralbo skirmished as best as they could from the Pescadería, causing losses in the English rearguard. All of the fighting men of the militia were killed.
Then came the assault. The English entered through the breach in the ramparts only to find corpses and no fighting men. When they entered the city, they started being attacked from the houses, with the women from Coruña throwing pots, rocks, scissors, tiles, and everything with which they could kill the English. The situation turned completely nasty for the English, as they were fighting the strongest force Nature has: mothers protecting their children.
The women of Coruña started fighting street by street, hiding behind corners with knives on their hands, while Cerralbo's troops attacked the Englishmen from behind. If one person distinguished herself during those dark hours, it was María Pita, whose husband Gregorio Rocamunde had died during the siege, being of the militiamen. She led the women during that hard time. During the English assault, she had killed one of the English ensigns, taking the banner as prize.
With the urban guerrilla, the sorties led by the militias, and the attacks on the rear by Cerralbo, the attack was repealed, causing enormous losses to the English. Between those who deserted, and those who died, the English casualties numbered around 12,000. Coruña suffered enormously too, losing more than 1,500 people in a siege that put the city to its limit, and that was finally won by women.
María Pita became a larger than life figure and a folk hero in Coruña, obtaining from the King the rank and pay of an ensign, a yearly pension, and a royal privilege for exporting mules to Portugal. Today, the main square is named María Pita Square, one of the adjacent streets is named Marqués de Cerralbo, and another one is Capitán Troncoso, and another important street is Capitán Juan Varela.
In short, taking cities was a key part of warfare, and garrisons were throughout cities or surrounding them.
The British army only became unstoppable in the early to mid 1700s. Before that they were still an impressive army, but they could be beaten as seen in the Hundred Years’ War with France.