Another user mentioned requesting an accommodation, first you should talk to your doctor and see if they're willing to write a letter supporting such a need for an accomodation.
If metformin is causing you to fall asleep and preventing you from waking up to an alarm, that's a "Stop taking immediately and seek medical attention immediately" since that's a symptom of lactic acidosis which is a possible severe (read possibly life threatening) side effect of metformin.
Any glucose control medication is going to have drowsiness as a "no-go" side effect since it's a signal of one of many life threatening conditions (lactic acidosis, hypoglycemia, etc) that cannot afford to be masked.
I would caution against blaming that specific medication during your meeting. If anyone there is or lives with a diabetic, they'll be familiar with the medication and it's side effects.
Then you should be able to bring paperwork from your doctor that you've discussed this side effect with them and they're changing your medication so that this won't be an issue anymore.
It may not save your job, but it might help. At this point, you don't have an accomodation in place for this type of issue, so you won't find protection there.
Yes you can be fired for not working when requested. It's the same as oversleeping and not showing up for your normal shift.
I swear Reddit is the most simplistic hive mind of idiots out there, follow the downvote and do what everyone else does. Itâ€™s why I limit my time wisely on these forums.