In California you can call 2-1-1 and explain to them what's happening with your roommate and ask if they have mobile crisis services which can come out to your apartment and evaluate your roommate and they can then determine if he needs to go to the hospital or not and they would be able to transport him there.
As for the tenant situation, my friends recently went through something similar (though not in SF). I don't know if the sublet changes anything though. In their case, their neighbor in a shared complex (common back yard, separate houses) went off the rails and got violent and destructive. He basically wrecked his house and made the common areas unsafe, plus stopped paying rent. Even in this case, it took lots of lawyer time, over a year, and a long restraining order process to get him to leave. SF likely has even stronger tenant rights rules. You will likely have great difficulty removing this person if they dig their heels in. Often landlords simply pay tenants to leave because the legal process is so expensive and uncertain.
This can be a very tricky situation. California does not compel medication (maybe under extreme circumstances? Even then I'm not sure). 5150 tries to get them stable if they have an acute and violent episode, but it's only for a few days and they're limited in what they can/will do. It's mostly useful for people that are going to come to their senses if their situation stabilizes. Mental health services from the city/county can try to have case workers and longer term strategies but it's difficult with someone that doesn't want meds. Police and the court system are of limited utility, mostly intervening only for violence.