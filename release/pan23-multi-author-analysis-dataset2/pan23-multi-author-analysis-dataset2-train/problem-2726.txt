This is more to do with Trump leaving the Iran nuclear deal than anything. Ever since the United States backed out of the deal, the sanctions have sent Iran's economy into a free fall. Out of desperation, Iran has been clinging to Russia and China more than ever.
So two major petro-states whose economies are fracturing are going to be buying and selling oil to eachother…is that effectively what is happening?
“My economy is dependent on oil and is hurting from sanctions, so we’re going to sell and buy oil from a country who is also dependent on oil and is hurting from sanctions.”.
So we can’t be too surprised when countries like Iran start to become so friendly with Russia. We’ve locked them out of the world market for decades, it’s only natural that sanctioned nations will form close pacts.
Once the United States scrapped the nuclear deal, and Trump reimposed sanctions of Iran, Iran has had no choice but to turn to Russia and China.
Ironically, havld the United States not left the nuclear deal, Iran could never pull a move like this without destroying their economy. However, since they were already under sanctions it doesn't hurt them at all.