However it should be recalled during those times, people who thought of the atomic bombings in Japan as immoral and wrong were in a narrow minority of the population. Most people of the allied nations overwhelmingly supported their use against Japan. It wasn't until the late 1960s this attitude began to shift to a more balanced point of view.
(2) International law only permits, if at all, indiscriminate bombing of a defended city if it is justified by military necessity; no military necessity of sufficient magnitude could be demonstrated here.
(3) there was no concentration of military objectives in either Hiroshima or Nagasaki; therefore, no legal basis exists for contending that the atomic attacks might be allowable by analogy to zone bombing.
A nuclear weapon of comparable power to Nagasaki or Hiroshima, used against a city, will in almost all thinkable scenarios be illegal because it per definition is indiscriminate. There are probably options for using strategic or tactical nuclear weapons against more isolated military targets, but there is just no argument to be made in favour of the legality of nuking a city with ordinary nuclear weapons, and even less so for the use of thermonuclear weapons at all, as using them without undue damage to civilians or the environment would difficult and even more so using them with any precision that could be termed "discriminatory", almost no matter where on the planet they are used.
(4) International law prohibits the use of weapons and belligerent means that produce unnecessary and cruel forms of suffering as illustrated by the prohibition of lethal poisons and bacteria; the atomic bomb causes suffering far more severe and extensive than the prohibited weapon.
Furthermore, all the various prohibitions on weapon types (it wasn't just poison gas) can't be read in isolation, they constitute codifications of underlying customary principles that also apply to new weapons. Mass destruction isn't legal just because no-one has had time to address your weapon in law yet. New weapons have to be considered by analogy from what already is legal or illegal.